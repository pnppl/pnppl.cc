todo: 
- css tweaks
	- x reduce vertical space
	- nicer ul styling
- display tags for item next to links to it?
- filenames in date format should be treated as containing that date - added to calendar, etc.
	- date format should have date-only and time-also formats, and we need to select one to rule them all
- trying to get rid of shell preprocessing
	- i think we need to create a new node that contains the text of the old one, then insert it after the current node. somehow
- next/prev post buttons
	- would be relatively easy to hack in with more shell but would rather avoid more of that
- ! rss is a little wonky. the heading buttons render but don't function in most readers
	- if i can ditch the shell preprocessing i can easily serve the plaintext version instead by changing p.Render() to p.Content()
		- we currently clean up redundant autolinks with a shell postprocess... hence the RSS feed is littered with them when using p.Render()
	- x domain, hence links (and also sitemap) are broken rn due to lack of www lol
	- certain formatting is not rendering for some reason, like italics, hr
	- really need to prioritize this since i want to promote RSS and make it the default way to follow me
		- would also like to set up an email subscription option, probably some rss-to-email service i can use
		- then there's also masto, bsky, etc. stuff people actually use. meh
- tracked down shortcode bug - modified frontmatter ext with nil trigger
	- this breaks shortcode ext. by deleting the node at the end with RemoveChild()
		- this is somewhat alarming. i clearly do not understand how this shit works
		- this stuff should not be executing for the insides of shortcodes
		- it does pretty much always trigger, even though it should only really run once. i just (thought!) i quit out if it wasn't on the first line
			- is the shortcode creating a new context? it seems to work on fragments of markdown. that would explain it
	- i did kinda rip the guts out... and it's the most irritating hack...
	- normal fenced code blocks work fine, i guess since that's handled by the markdown module
	- this is all somewhat vexing. shortcodes aren't very important but i have one usecase, spoiler/trigger warning. if i don't delete the node in frontmatter (non-hash) everything basically works out --- the problem with not deleting it in frontmatter_hash is it won't render as an h1, but that doesn't apply to non-h1-files. but if i do this, then i'll have to further complicate my ridiculous preprocessing: only duplicate the line if it does not begin with #. and there will still be edge cases, eg a shortcode whose content begins with a hash sign
	- probably best to just leave them turned off if i can't clean up my frontmatter situation
- what i would really like is to replace the frontmatter extensions with one simple one that sets the metadata based on my parameters, then have autolink_pages refer back to that metadata.
	- i don't understand the way this program works well enough. is the metadata in a global state, or is it being passed around all over the place, or what am I missing?
	- we've semi-successfully changed what metadata is "set" (?) in the frontmatter ext - the info makes it to the template, anyway.
		- so how do I retrieve it from inside autolink_pages, instead of reinventing the wheel and somehow breaking emdash in the process? 
		- I should just be able to type some shit like "metadata[title]" and retrieve it, right? RIGHT???
		- we should not be generating the firstline-title more than once. and we should not have to fuck with the text files first
			- and we should be doing it in one shot, without changing the page at all in the process, so other extensions can make the title H1 and etc. 
- chokes on unicode with preceding space or at beginning of line. seems to be the same problem as tab
- blank titles cause issues
- we're technically live!
	- host issues mostly cleared up by moving to web1.0hosting! we even have directory listings!
		- only downside: can only upload over ftp
		- pages still always show the trailing /
			- i guess i can live with this since it is technically a directory. i wish it were just .html. maybe try to change that later
		- add PHP features? Likes counter? try to make a gallery for 1bitday gifs?
		- add web1.0hosting button?
		- configure mail (wait for support)
		- x remove git webhook/delete statichost.eu
- changed links in /txt to protocol-relative ones. ought to work but can't properly test until deploy
	- when opened as file:// in ffx the domain disappears?
		- works fine with python server
	- would be nice to set it up to automatically strip https - autolink ext, markdown wikilink ext
		- is this actually a stupid idea? most sites won't serve http
		- definitely don't strip http:// since some sites only serve that and we want to specify
		- ideally i would specify when appropriate and relativize when not but then i can't just paste links
	- x if we can output /post.html instead of /post/index.html then we could actually use the wikilinks more like real wikilinks - no leading /
		- x of course we could also modify the extension to fit the current setup
			- i had already modified it to the directory approach lol. modified again to add leading slash when needed
	- we are still seeing https:// in `<meta property="og:url"` tags -- opengraph ext
		- x also these seem broken. there is no domain. i think i need to specify `basename` or something?
			- should be fixed, had to pass build option
	- also still present in sitemap.xml, rss feed
- syncing, metadata, and mobile fuckery
	- git does not store any metadata. idk why I thought it did. every clone changes the modtime. we can work around this annoyance with metastore
		- right now i have it store the metadata before we commit, pull, and push. we apply it only when we setup the repo with gitup
			- this is not adequate. if i make a new post on one device, then pull the repo on the other, the new post will have metadata set to when i pulled it. metadata will gradually drift apart between them
			- i can't just apply the metadata willy-nilly: after a pull, it will potentially be stale
			- there is probably a way to work around this shit with git. then again it isn't really designed for this
				- git pull will wipe out local changes that haven't been commited. if you committed, they get merged
					- i'm assuming conflicting files like meta.store will be a pain in the ass
			- ok, i made a stab at this, using git stash. we stash our changes, pull the repo and apply saved metadata, then pop changes, save new metadata, and commit that
				- probably some gaping hole in this but whatever
				- it's kind of a disaster. might as well keep saving it and restore on first clone, but really would be better off just saving modtime
				- also my git commands are not right somehow. something about unstaged changes (suppressed with -q)
				- actually kinda seems to be working fine now
	- i cannot create a symlink on any of the storage accessible to markor. god dammit
		- i could link it the other direction but i can't find any way to make git follow the link, so it would just upload a pointer
		- after much gnashing of teeth I decided we have to use rsync
			- we can run a cron job in the background that regularly pulls the repo and rsyncs site/txt/ to the markor folder
			- then when we deploy (manually for now), we can rsync the markor directory back. already added this step to deploy.fish
			- the modtime thing is an issue here since we will be rsyncing only newer versions with --update
- indented paragraphs should not be put in code blocks, wtf
- git history is already fucking massive, probably thanks to xlog rebuilding goddamn everything each time with its nondeterministic builds
	- we clearly need to just exclude the stuff xlog builds from git
	- decided to both add them to my gitignore and replace `git add .` with specific locations for now. both approaches are kind of ugly and i don't need both but idk 
- commented out the calendar addon since it's kind of useless rn
- x figure out wtf is up with permissions. just noticed i have been making them executable to group and other just not owner. i am not happy about this.
	- if we have to make them executable for the host then let's add in a chmod -x step after
		- did this, seems ok
- the backslash in my shruggie did not make it to the published html >:(
	- i don't even know where to begin with this. something somewhere along the way probably needs me to escape it by doubling it
	- the typographer markdown extension triggers on \. but i have this disabled. it does "smart quotes" etc.
	- shell pipelining is an obvious culprit but i don't think any of my kludges would have done anything
	- somehow, somewhere, a string is not being properly quoted.
- i found out what the hyphens in templates mean!!! they suppress leading or trailing whitespace!! yay!!
	- maybe we can get rid of all that damn whitespace mosaic displays in the page title
- due to the hacky way i added the missing sections to the toc, we get no toc if the document has no headings, even if we have backlinks/see also
	- this isn't *that* big of a deal - stuff without a single heading is probably short anyway - but very annoying

low priority/done:
- tweak title display, not that important, shows filename rn, kinda nice actually
	- swap filename and firstline/title?
- x get autolink_pages to stop autolinking pages to themselves
	- solved with a shell kludge after html already generated; can't figure out how to do it from inside the extension
- x wikilink syntax
	- very hacky but complete. however it would be a huge pain to swap label and destination so links have to be written [[file.html|click here]]
	- rather irritating not to be able to refer to pages by name, but autolinking means you don't have to if you are using the same display text
- x fix emoji bullshit
	- emoji markdown support removed
	- unicode glyphs replaced with ascii for extlink, footnote
	- navbar glyphs replaced with degenerate hidden <li></li> in template to make NCSA render bullets for us
- x disabled typography renderer (... -> …, "" -> “”, etc) because it dumps a bunch of &quot; type shit in ncsa. but it's kind of ugly not having it and is counter to the goal of: low tech input, high tech output. so could consider turning it back on.
	- no, leave it off. think of how annoying it is pasting "smart quotes" into an SMS
- x fix date format
	- calendar links to pages by all date mentions. it would be nice to have one restricted to creation/modification as well
		- of course i had hoped to just generate an alphabetical list of filenames to the same effect.  recent, but everything
		- these should also be anchors if possible. i don't understand why you would insert tags in a page and link to them without including anchors
		- anchors are now added and working, but i haven't managed to insert links to them on the tag page. calendar page is working
			- should be fixed now, had to make tag page show yyyy-mm-dd
- mosaic compat
	- x anchors don't work -- is that my fault or did mosaic not support them?
		- in html 2.0 you can't navigate to an element by id, you have to have <a name="id">
- x make sure dark mode works since we have this giant fucking css framework. consider minifying that also. or throwing it away
- x consider how to handle modification times. if we want this to be more wiki/garden and less write-once blog, modification is important. and i know how useful surfacing by modified is. but our modification times will, right now, be based entirely on filesystem metadata. it's not ideal and i'm not sure how xlog handles that but i don't see a better option right now. we don't want to use frontmatter since we have no good way to automate updating it.
	- it's fine, leave it alone
- index doesn't show on tag page
- x setext (underlined) headings don't seem to work. did i turn them off somehow? anyway, they suck
- can't put a tab in the middle of the line or it hangs
- ! aliasing for mentions?
- x a lot of stuff is going to be really useless if i can't get it to print the first line insted of filename
	- related pages: list of dates. calendar entries: list of dates. hashtags: list of dates. we need to figure out how to make what i did with autlink_pages more universal
	- i THINK the frontmatter extension does everything i want, except that it parses ---\ntitle: \n--- instead of the first line
		- i could just use my shell script to change the first line to this format, but then my hacky autolink_pages solution will fail
		- getting close. but two major issues:
			- ! if the line starts with # it fails. we get an empty title ("#title") or the filename ("# title").
				- solved with some ugly hacks:
					1. frontmatter extension is split in two, one triggers on 'nil' ("anything", but apparently not really) and the other on '#'
					2. files are just preprocessed with shell to duplicate first line and remove leading/trailing h1 hash
						- This breaks at least one file that starts '```' despite use of yaml block literal
			- the line can't be indented. setting it to accept indented lines causes server to hang. NBD
			- the line does not get rendered normally. the parser consumes it. it's metadata after all
				- fixed i think, had to comment out node removal
					- undid this as part of my ugly h1 solve
- x autlink_pages fails on all sorts of stuff i wouldn't expect, basically any leading punctuation
	- i strip leading and trailing h1 from the normalized name but i figured the rest could be left intact. apparently not?
	- the trigger is an issue. setting it to nil, or ' ', is unsuccessful, and several characters (#, $, %) cause a hang
		- tested all and added several working ('!', '?' ..)
			- removed these because they don't actually work?
- got a lot done, need to tidy and merge
	- x added hotkeys for Toc, Home, Src (accesskey="n") with <u> for active char
		- ffx: alt-shift-key
		- x want to add for the rest of the navbar but it's spit out on a template. Calendar, Recent, Hashtags. no need for rss accelerator
		- x shortcuts to the first 10 headings would be cool but not worth much effort
			- implemented this but it relies on global state and is buggy
				- i can't pass the number around the template because they only take one arg and it calls itself recursively
				- i would rather put the accesskeys in the headings themselves instead of the toc, but i don't know how to do this
					- if i did figure this out, i think i could have key=1 cycle through the first h1 and all its children, key=2 the second h1 and children, etc.
					- kind of hard to troubleshoot because it behaves differently with the local server than the deployed one
	- pushed theme in a win9x direction, hopefully not too overbearing. gives it a lot of personality
		- the charm of it is how the 9x elements seem apart from the content
			- we want to style navigation elements this way, and content its own way, closer to the sleek OOTB design
			- the theme not being unified is its strength. 9x programs always did whatever they wanted anyway
			- it's like we have photoshop or the like open, plus a pop-up for the TOC, and a toolbar with our buttons
- x mobile should wrap now
- reduced title to 70 chars, which is max for gopher. filename still doesn't display quite right.
	- floating it to the right on list pages is stupid and should be changed
- x All Posts page - alpha sorted by filename, show filename and firstline. also link to src
	- recents already seems to include all posts
	- also sort by firstline
	- sorting by firstline should be done. masquerading as disqus. for filename, idk, might want a separate page. or just link to directory
- x my site is being rendered in "quirks mode", i assume due to the use of <center>. we don't really need this, it doesn't make bare html look much better. replace with appropriate modern alternative.
	- actually the doctype decl is not making it through to the final page for some fucking reason
	- all comments seem to be disappearing. seems to be my fault, it made it through before
	- i guess i can probably keep using my crusty tags! :)
	- issue was the doctype got moved outside the header decl in the layout.html template
- TOC is working but might want to move it outside view area
	- no, leave position alone. however we need text to be better at not running into it
	- x no visual indication of current position
	- Backlinks, See Also added with shell kludge
- replace branding - logo, name, favicon
	- tent. name: pnppl's commonplace
		- kinda long compared to just pnppl.cc
	- tent. logo/favicon: fluffy dandelion formed from network graph (nodes and lines)
		- hand draw with supernote and encode as gif 
		- just threw up my 1-bit.day avatar for now
- x <ul> only generated with -, not * or +
	- this might cause problems. i think it's the only change i've made to markdown handling that is a break not an extension
- x #1 is a hashtag. should not be
- x email button is messed up on mobile
- html output has a lot of pointless whitespace - add hyphens to templates
- page generation is just... nondeterministic. all the pages change slightly for no reason every build. oh well
- x recents is all fucked up, thought i fixed that
- x search
	- pagefind was very easy to add. i wish it did not depend on wasm. maybe we can replace it later.

longterm notions
- replace css with something much smaller and more compatible
- support other delivery formats like epub
- visual graph
- other protocols like gopher
